containerSecurityContext:
  allowPrivilegeEscalation: false
  seccompProfile:
    type: RuntimeDefault
  capabilities:
    drop: ["ALL"]
  privileged: false
  readOnlyRootFilesystem: true
  runAsGroup: 1000
  runAsNonRoot: true
  runAsUser: 1000

affinity:
  nodeAffinity:
    requiredDuringSchedulingIgnoredDuringExecution:
      nodeSelectorTerms:
      - matchExpressions:
        - key: node-role.kubernetes.io/control-plane
          operator: DoesNotExist
        - key: kubernetes.io/arch
          operator: In
          values: 
          - 'amd64'

persistence:
  enabled: true
  claimName: nfs-gitea
  size: 10Gi
  accessModes: ["ReadWriteOnce"]
  storageClass: nfs

gitea:
  admin:
    existingSecret: gitea-creds
    email: 'ken.lasko@gmail.com'
  config:
    database:
      DB_TYPE: mysql
      NAME: gitea
      HOST: mariadb.mariadb.svc.cluster.local
      USER: gitea
      PASSWD: ***REMOVED***
      SCHEMA: gitea
    session:
      PROVIDER: db
    cache:
      ADAPTER: memory
    queue:
      TYPE: level
    indexer:
      ISSUE_INDEXER_TYPE: bleve
      REPO_INDEXER_ENABLED: true
  # additionalConfigFromEnvs:
  #   - name: GITEA__DATABASE__HOST
  #     value: mariadb.mariadb.svc.cluster.local
  #   - name: GITEA__DATABASE__PASSWD
  #     valueFrom:
  #       secretKeyRef:
  #         name: gitea-creds
  #         key: password

resources:
  requests:
    cpu: 100m
    memory: 200Mi
  limits:
    cpu: 100m
    memory: 400Mi

postgresql:
  enabled: false
redis-cluster:
  enabled: false
postgresql-ha:
  enabled: false

checkDeprecation: false
test:
  enabled: false
