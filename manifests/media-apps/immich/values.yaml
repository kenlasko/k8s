image:
  tag: v1.132.3
# immich:
#   persistence:
#     library:
#       existingClaim: nfs-pictures
persistence:
  config:
    enabled: true
    existingClaim: nfs-pictures
    mountPath: /media/pictures
env:
  DB_HOSTNAME:
    secretKeyRef:
      name: immich-secrets
      key: DB_HOSTNAME
  DB_DATABASE_NAME:
    secretKeyRef:
      name: immich-secrets
      key: DB_DATABASE_NAME
  DB_USERNAME:
    secretKeyRef:
      name: immich-secrets
      key: DB_USERNAME
  DB_PASSWORD:
    secretKeyRef:
      name: immich-secrets
      key: DB_PASSWORD
  REDIS_HOSTNAME:
    secretKeyRef:
      name: immich-secrets
      key: REDIS_HOSTNAME
  REDIS_PASSWORD:
    secretKeyRef:
      name: immich-secrets
      key: REDIS_PASSWORD
affinity:
  nodeAffinity:
    requiredDuringSchedulingIgnoredDuringExecution:
      nodeSelectorTerms:
      - matchExpressions:
        - key: node-role.kubernetes.io/control-plane
          operator: DoesNotExist
        - key: kubernetes.io/arch
          operator: In
          values: 
          - "amd64"