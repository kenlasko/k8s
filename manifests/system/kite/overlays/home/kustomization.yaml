apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
namespace: kube-system
helmCharts:
- name: kite
  repo: https://zxh326.github.io/kite
  version: 0.6.9
  releaseName: kite
  namespace: kube-system
  valuesFile: ../../base/values.yaml
resources:
- ../../base
patches:
- target:
    kind: Deployment
    name: kite
  patch: |-
    - op: add
      path: /spec/template/spec/containers/0/envFrom/-
      value:
        secretRef:
          name: kite-db-credentials
    - op: add
      path: /spec/template/spec/containers/0/envFrom/-
      value:
        secretRef:
          name: kite-secrets
