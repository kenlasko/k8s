image:
  repository: linuxserver/code-server
  tag: 4.99.1
  registry: lscr.io
priorityClassName: low-priority
securityContext:
  allowPrivilegeEscalation: false
  readOnlyRootFilesystem: false
  seccompProfile:
    type: RuntimeDefault
  capabilities:
    drop: ["ALL"]
    add:
    - "CHOWN"
    - "SETGID"
    - "SETUID"
    - "DAC_OVERRIDE"
env:
- name: PUID
  value: "1000"
- name: PGID
  value: "1000"
- name: PASSWORD
  valueFrom:
    secretKeyRef:
      name: vscode-creds
      key: password        
- name: TZ
  value: "America/Toronto"
resources:
  requests:
    cpu: 4m
    memory: 250Mi
  limits:
    # cpu: 300m
    memory: 700Mi
service:
  port: 8443
persistentVolume:
  type: nfs
  mountPath: /config
extraVolumes:
- name: github-token
  secret:
    secretName: vscode-creds
    defaultMode: 0444
extraVolumeMounts:
- name: github-token
  mountPath: /config/.ssh/id_ed25519
  subPath: github-token
  readOnly: true