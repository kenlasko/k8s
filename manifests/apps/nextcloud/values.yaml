internalDatabase:
  enabled: false
externalDatabase:
  enabled: true
  type: mysql
  host: mariadb.mariadb.svc.cluster.local
  database: nextcloud
  existingSecret:
    enabled: true
    secretName: nextcloud-db-credentials
    usernameKey: username
    passwordKey: password

nextcloud:
  host: nextcloud.ucdialplans.com
  trustedDomains:
  - ucdialplans.com
  - nextcloud.ucdialplans.com
  existingSecret:
    enabled: true
    secretName: nextcloud-secrets
    usernameKey: nextcloud-username
    passwordKey: nextcloud-password
    tokenKey: ""
    smtpUsernameKey: smtp-username
    smtpPasswordKey: smtp-password
    smtpHostKey: smtp-host
  extraEnv:
  - name: OVERWRITEPROTOCOL
    value: https
  - name: OVERWRITECLIURL
    value: https://nextcloud.ucdialplans.com
  - name: REDIS_HOST
    value: redis-master.redis.svc.cluster.local
  - name: REDIS_HOST_PASSWORD
    valueFrom:
      secretKeyRef:
        name: nextcloud-secrets
        key: redis-password
  mail:
    enabled: true
    fromAddress: nextcloud@ucdialplans.com
    domain: ucdialplans.com
    smtp:
      host: mail.smtp2go.com
      secure: ssl
      port: 465
      authtype: LOGIN

collabora:
  enabled: true
  collabora:
    servername: "office.ucdialplans.com"
    aliasgroups:
    - host: "https://office.ucdialplans.com"
    existingSecret:
      enabled: true
      secretName: nextcloud-secrets
      usernameKey: nextcloud-username
      passwordKey: nextcloud-password
    extraParams:
    - "--o:ssl.enabled=true"



deploymentLabels:
  mariadb-client: "true"

persistence:
  enabled: true
  existingClaim: nfs-nextcloud-config
  nextcloudData:
    enabled: true
    existingClaim: nfs-nextcloud-data
    accessMode: ReadWriteOnce
    size: 500Gi

affinity:
  nodeAffinity:
    requiredDuringSchedulingIgnoredDuringExecution:
      nodeSelectorTerms:
      - matchExpressions:
        - key: node-role.kubernetes.io/control-plane
          operator: DoesNotExist
        - key: kubernetes.io/arch
          operator: In
          values: 
          - "amd64"