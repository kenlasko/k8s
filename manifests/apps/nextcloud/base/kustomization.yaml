apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
helmCharts:
- name: nextcloud
  repo: https://nextcloud.github.io/helm/
  version: 8.4.1
  releaseName: nextcloud
  namespace: nextcloud
  valuesFile: values.yaml
resources:
- backup.yaml
# - database.yaml
- external-secrets.yaml
- httproute.yaml
- namespace.yaml
- volume.yaml
patches:
- path: deploy-patch-collabora.yaml
  target:
    group: apps
    version: v1
    kind: Deployment
    name: nextcloud-collabora
- path: deploy-patch-nextcloud.yaml
  target:
    group: apps
    version: v1
    kind: Deployment
    name: nextcloud