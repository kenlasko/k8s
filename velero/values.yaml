configuration:
  backupStorageLocation:
  - name: default
    provider: aws
    bucket: kube
    default: true
    config:
      s3Url: http://nas01.ucdialplans.com:8010
      s3ForcePathStyle: true
      region: "default"
  volumeSnapshotLocation:
  - name: qnap
    provider: aws
    bucket: kube-vol
    default: true
    config:
      s3Url: http://nas01.ucdialplans.com:8010
      s3ForcePathStyle: true
      region: "default"
  features: EnableCSI

credentials:      
  useSecret: true
  existingSecret: s3-credentials

initContainers:
  - name: velero-plugin-for-aws
    image: velero/velero-plugin-for-aws:v1.9.0
    imagePullPolicy: IfNotPresent
    volumeMounts:
      - mountPath: /target
        name: plugins
  - name: velero-plugin-for-csi
    image: velero/velero-plugin-for-csi:v0.7.1
    imagePullPolicy: IfNotPresent
    volumeMounts:
      - mountPath: /target
        name: plugins

affinity:
  nodeAffinity:
    requiredDuringSchedulingIgnoredDuringExecution:
      nodeSelectorTerms:
      - matchExpressions:
        - key: node-role.kubernetes.io/control-plane
          operator: DoesNotExist
        - key: kubernetes.io/arch
          operator: In
          values: 
          - 'amd64'