# kind: IngressRoute
# apiVersion: traefik.io/v1alpha1
# metadata:
#   name: ucdialplans
#   namespace: ucdialplans
#   annotations:
#     external-dns.alpha.kubernetes.io/target: k3s.ucdialplans.com
#     kubernetes.io/ingress.class: traefik
# spec:
#   entryPoints: 
#   - websecure
#   routes:
#   - match: Host(`www.ucdialplans.com`) 
#     kind: Rule
#     services:
#     - name: ucdialplans-service
#       port: 8080
#     middlewares:
#     - name: ucdialplans-redirect
#       namespace: ucdialplans
#     - name: traefik-security
#       namespace: traefik
#   tls:
#     options:
#       name: tls-options-default
#       namespace: traefik

# ---
# apiVersion: traefik.io/v1alpha1
# kind: Middleware
# metadata:
#   name: ucdialplans-redirect
#   namespace: ucdialplans
# spec:
#   redirectRegex:
#     regex: ^https?://((www.)?ucdialplans.com)
#     replacement: https://www.ucdialplans.com
#     permanent: true
