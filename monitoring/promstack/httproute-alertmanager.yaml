---
apiVersion: gateway.networking.k8s.io/v1
kind: HTTPRoute
metadata:
  name: alertmanager
  namespace: monitoring
spec:
  parentRefs:
  - name: tls
    group: gateway.networking.k8s.io	
    kind: Gateway
    namespace: cilium
    sectionName: https
  hostnames:
  - "test-alertmanager.ucdialplans.com"
  rules:
  - backendRefs:
    - name: alertmanager-operated
      group: ''	
      namespace: monitoring
      kind: Service
      port: 9093
      weight: 1
    matches:	
    - path:	
        type: PathPrefix	
        value: /

---
apiVersion: gateway.networking.k8s.io/v1alpha2
kind: GRPCRoute
metadata:
  name: alertmanager
  namespace: monitoring
spec:
  parentRefs:
  - name: tls
    group: gateway.networking.k8s.io	
    kind: Gateway
    namespace: cilium
    sectionName: https
  hostnames:
  - "test-alertmanager.ucdialplans.com"
  rules:
  - backendRefs:
    - name: alertmanager-operated
      group: ''	
      namespace: monitoring
      kind: Service
      port: 9093
      weight: 1
    matches:	
    - headers:	
        - name: Content-Type	
          value: "application/grpc"
          type: Exact