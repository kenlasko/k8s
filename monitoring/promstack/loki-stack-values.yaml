loki:
  enabled: true
  persistence:
    enabled: true
    storageClassName: nfs-csi-dynamic
    size: 20Gi
  analytics:
    reporting_enabled: "false"
    usage_stats_url: ""
  extraEnv:
  - name: LOKI_ANALYTICS_REPORTING_ENABLED
    value: "false"
  - name: LOKI_ANALYTICS_USAGE_STATS_URL
    value: ""

  resources:
    requests:
      cpu: 7m
      memory: 125Mi
    limits:
      # cpu: 120m
      memory: 400Mi
  affinity:
    nodeAffinity:
      requiredDuringSchedulingIgnoredDuringExecution:
        nodeSelectorTerms:
        - matchExpressions:
          - key: node-role.kubernetes.io/control-plane
            operator: DoesNotExist
          - key: kubernetes.io/arch
            operator: In
            values: 
            - "amd64"
promtail:
  enabled: true
  resources:
    requests:
      cpu: 40m
      memory: 200Mi
    limits:
      # cpu: 250m
      memory: 275Mi
  # config:
  #   snippets:
  #     extraScrapeConfigs: |
  #       - job_name: syslog
  #         syslog:
  #           listen_address: 0.0.0.0:1514
  #           listen_protocol: tcp
  #           idle_timeout: 60s
  #           label_structured_data: yes
  #           labels:
  #             job: "syslog"
  #         relabel_configs:
  #           - source_labels: ['__syslog_message_hostname']
  #             target_label: 'host'
  # extraPorts:
  #   syslog:
  #     name: tcp-syslog
  #     containerPort: 1514
  #     service:
  #       port: 1514
  #       type: ClusterIP
  # resources:
  #   limits:
  #     cpu: 300m
  #     memory: 300Mi
  #   requests:
  #     cpu: 200m
  #     memory: 250Mi
  # initContainer:
  # - name: init
  #   image: docker.io/busybox:1.33
  #   imagePullPolicy: IfNotPresent
  #   command:
  #     - sh
  #     - -c
  #     - sysctl -w fs.inotify.max_user_instances=512
  #   securityContext:
  #     privileged: true

