loki:
  # image:
  #   tag: 2.9.3
  enabled: true
  persistence:
    enabled: true
    storageClassName: nfs-csi-dynamic
    size: 20Gi
  requests:
    cpu: 100m
    memory: 150Mi
  limits:
    cpu: 500m
    memory: 500Mi
  affinity:
    nodeAffinity:
      requiredDuringSchedulingIgnoredDuringExecution:
        nodeSelectorTerms:
        - matchExpressions:
          - key: node-role.kubernetes.io/control-plane
            operator: DoesNotExist
          - key: kubernetes.io/arch
            operator: In
            values: 
            - 'amd64'
promtail:
  enabled: true
  requests:
    cpu: 250m
    memory: 100Mi
  limits:
    cpu: 750m
    memory: 150Mi
  # config:
  #   snippets:
  #     extraScrapeConfigs: |
  #       - job_name: syslog
  #         syslog:
  #           listen_address: 0.0.0.0:1514
  #           listen_protocol: tcp
  #           idle_timeout: 60s
  #           label_structured_data: yes
  #           labels:
  #             job: "syslog"
  #         relabel_configs:
  #           - source_labels: ['__syslog_message_hostname']
  #             target_label: 'host'
  # extraPorts:
  #   syslog:
  #     name: tcp-syslog
  #     containerPort: 1514
  #     service:
  #       port: 1514
  #       type: ClusterIP
  # resources:
  #   limits:
  #     cpu: 300m
  #     memory: 300Mi
  #   requests:
  #     cpu: 200m
  #     memory: 250Mi
  # initContainer:
  # - name: init
  #   image: docker.io/busybox:1.33
  #   imagePullPolicy: IfNotPresent
  #   command:
  #     - sh
  #     - -c
  #     - sysctl -w fs.inotify.max_user_instances=512
  #   securityContext:
  #     privileged: true

