apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
resources:
- ../../base/appset-template.yaml

configMapGenerator:
- name: appset-vars
  literals:
  - category=apps
  - syncWave=10

patches:
- target:
    kind: ApplicationSet
  patch: |
    - op: replace
      path: /metadata/name
      value: apps
- target:
    kind: ApplicationSet
  patch: |
    - op: replace
      path: /spec/generators/0/files/0/path
      value: manifests/apps/*/overlays/cloud/argocd-override.yaml
